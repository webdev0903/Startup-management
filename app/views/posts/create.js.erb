<% if @post.errors.present? %>
  <% 
    errors = []
    @post.errors.messages.values.each do |message|
      errors += message
    end
  %>
  $('.pageContent').prepend("<%= j render(partial: '/shared/js_error_messages', collection: errors, as: :error) %>");
<% else %>
  $('#postsList').prepend("<%= escape_javascript(render('posts/post', :post => @post)) %>");
  $('#postText').val('');
<% end %>